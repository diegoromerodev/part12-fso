(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(16),i=n.n(c),s=n(3),u=n(0),o=function(e){var t=e.setFilter,n=e.filter;return Object(u.jsxs)("div",{children:["filter: ",Object(u.jsx)("input",{onChange:function(e){t(e.target.value)},value:n})]})},a=function(e){var t=e.notification;return t.message?Object(u.jsx)("div",{className:t.type,children:Object(u.jsx)("p",{children:t.message})}):null},f=n(4),j=n.n(f),d="/api/persons/",b=function(){return j.a.get(d).then((function(e){return e.data}))},l=function(e){return j.a.post(d,e).then((function(e){return e.data}))},h=function(e){return j.a.put(d+e.id,e).then((function(e){return e.data}))},p=function(e){return j.a.delete(d+e)},m=function(e){var t=e.persons,n=e.setPersons,c=e.setNotification,i=Object(r.useState)(""),o=Object(s.a)(i,2),a=o[0],f=o[1],j=Object(r.useState)(""),d=Object(s.a)(j,2),b=d[0],p=d[1],m=function(e){c({message:e.response.data.error,type:"warning"}),setTimeout((function(){return c({})}),6e3)};return Object(u.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),a&&b){var r=function(e){var n=new RegExp(e,"i");return t.find((function(e){return n.test(e.name)}))}(a);if(r)return!!confirm("".concat(a," is already present in the phonebook, do you want to update the number?"))&&(r.number=b,f(""),p(""),h(r).then((function(){n(t.map((function(e){return e.id===r.id?r:e}))),c({message:"Successfully updated ".concat(r.name,"'s number."),type:"success"}),setTimeout((function(){return c({})}),3e3)})).catch((function(e){m(e)})),!0);var i={name:a,number:b};l(i).then((function(e){n(t.concat(e)),c({message:"Successfully added ".concat(i.name,"'s number."),type:"success"}),setTimeout((function(){return c({})}),3e3)})).catch((function(e){m(e)})),f(""),p("")}},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{onChange:function(e){f(e.target.value)},value:a})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{onChange:function(e){p(e.target.value)},value:b})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.person,n=e.handleDelete;return Object(u.jsxs)("div",{style:{border:"2px solid #333",padding:"10px",margin:"10px",marginRight:"50%"},children:[Object(u.jsxs)("p",{children:[t.name," - ",t.number]}),Object(u.jsx)("button",{type:"button",style:{backgroundColor:"lightcoral",color:"#fafafa"},onClick:n,children:"delete?"})]})},x=function(e){var t=e.persons,n=e.filter,r=e.setPersons;return Object(u.jsx)(u.Fragment,{children:t.reduce((function(e,c){return n&&!c.name.includes(n)||e.push(Object(u.jsx)(O,{handleDelete:function(){return function(e){var n=e.id,c=e.name;if(!window.confirm("Delete ".concat(c,"?")))return!1;p(n).then((function(){r(t.filter((function(e){return e.id!==n})))}))}(c)},person:c},c.id)),e}),[])})};var v=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(""),f=Object(s.a)(i,2),j=f[0],d=f[1],l=Object(r.useState)({}),h=Object(s.a)(l,2),p=h[0],O=h[1];return Object(r.useEffect)((function(){b().then(c)}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)(a,{notification:p}),Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(o,{filter:j,setFilter:d}),Object(u.jsx)(m,{persons:n,setPersons:c,setNotification:O}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(x,{filter:j,persons:n,setPersons:c})]})};n(40);i.a.render(Object(u.jsx)(v,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.1233801e.chunk.js.map